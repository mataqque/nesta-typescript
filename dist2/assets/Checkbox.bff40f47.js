var l=Object.defineProperty;var p=(a,t,e)=>t in a?l(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var r=(a,t,e)=>(p(a,typeof t!="symbol"?t+"":t,e),e);import{a as n}from"./index.04fb98fa.js";import{r as h,a as o,j as c}from"./app.ffd1c258.js";class m{constructor(){this.api=n.create({baseURL:"https://cors.formulaperu.com/https://api.sperant.com/v3/",headers:{"Cache-Control":"no-cache",Authorization:"mQlbKvZAlc5MpKwKs3AHr3r9v2MbhvbA1E4pX2Mw"}})}createClient(t){const e=localStorage.getItem("url_query");return/google|adwords|googleads|gclid|cpc/i.test(e)&&(t.source_id=59),/facebook|fbclid|pixel/i.test(e)&&(t.source_id=51),/icommarketing|mailchimp|mail/i.test(e)&&(t.source_id=27),new URLSearchParams(e).forEach((s,i)=>{/utm_/.test(i)&&(t[`${i.toLowerCase()}`]=s)}),this.api.post("/clients",t)}projects(t=""){return this.api.get(`/projects/${t}`)}users(t=""){return this.api.get(`/users/${t}`)}types(t){return this.api.get("/types",t)}createBudget(t){return new URLSearchParams(localStorage.getItem("url_query")).forEach((e,s)=>{/utm_/.test(s)&&(t[`${s.toLowerCase()}`]=e)}),this.api.post("/budgets",t)}}class g{constructor(){r(this,"send",async()=>{this._client.interest_type_id=4,this._client.source_id=46,this._client.input_channel_id=4;let t="Principal";window.location.pathname.includes("piros")&&(t="Piros"),window.location.pathname.includes("landing-terra")&&(t="Terra F1"),window.location.pathname.includes("fases/terra-fase-1")&&(t="Terra F1"),window.location.pathname.includes("fases/terra-fase-2")&&(t="Terra F2");const e=new Date().toLocaleString("es-PE",{timeZone:"America/Lima"});n.post("https://cors.formulaperu.com/https://script.google.com/macros/s/AKfycbws7GCpc1eEN5ScQ_IisUkLEwKQHvY_XCe5_KEbXA3ytUWVtA/exec",{ss_id:"1JidgnRmKPaYiP1QNsJ5XC9wNVBz9s4OV8-4C39wzFt4",range:t+"!A:XX",values:[[e,`${this._client.fname} ${this._client.lname}`,this._client.email,this._client.phone,{1:"DNI",2:"CE"}[this._client.document_type_id]||"",this._client.document,this._client.rooms,this._client.date_of_birth,this._client.district,this._client.decide_time,this._client.utm_source,this._client.utm_medium,this._client.utm_campaign,this._client.utm_term,this._client.utm_content]]}),this._client.date_of_birth=new Date(this._client.date_of_birth).getTime();let{data:{data:s}}=await this._sperant.createClient(this._client);const{data:{data:i}}=await this._sperant.users(s.attributes.last_agent_assigned);return i.attributes.phone=i.attributes.phone.replace(/\s/g,"").replace(/\+-/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/\+51/g,"").split("/")[0],s.last_agent_assigned=i.attributes,s});this._client={},this._sperant=new m}withInterested(t){return t.observation=[t.rooms&&`Dormitorios: ${t.rooms}`,t.district&&`Distrito: ${t.district}`,t.decide_time&&`Decide su compra en: ${t.decide_time}`].filter(Boolean).join(", "),this._client=t,this}}class f extends h.exports.Component{constructor(){super(...arguments);r(this,"setValue",(e,s)=>{var i={};i[e.target.name]=e.target.checked,this.props.setValueTxt(i)})}render(){return o("div",{className:this.props.className+" form-group form-nesta mb-0 "+(this.props.estado?"validado":this.props.styleValid&&this.props.activateValid==="active"?"invalidado":null),children:[o("span",{translate:"no",className:"wpcf7-form-control-wrap terminos_condiciones checkbox-nesta text-center",children:[c("input",{type:"checkbox",name:this.props.name,checked:this.props.estado,onChange:e=>this.setValue(e),className:"wpcf7-form-control wpcf7-acceptance btn_terminos_condiciones invisible",id:this.props.id,"aria-invalid":"false",style:{position:"absolute"}}),o("label",{for:this.props.id,className:"geomanist-regular",style:{padding:0},children:[c("span",{translate:"no"}),this.props.text]})]}),this.props.validator.message(this.props.name,this.props.estado,this.props.styleValid)]})}}export{f as C,g as I};
